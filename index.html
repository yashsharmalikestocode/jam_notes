<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JAM Notes</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Supabase JS v2 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <div class="logo">ðŸ§ </div>
      <h1>JAM Notes</h1>
    </div>

    <div class="auth">
      <div class="auth-fields" id="auth-fields">
        <input type="email" id="email" placeholder="Email" autocomplete="email" />
        <input type="password" id="password" placeholder="Password" autocomplete="current-password" />
        <button id="btn-signup" class="btn secondary">Sign Up</button>
        <button id="btn-login" class="btn primary">Login</button>
      </div>
      <div class="auth-session hidden" id="auth-session">
        <span id="session-email">Signed in as â€”</span>
        <button id="btn-logout" class="btn danger">Logout</button>
      </div>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab active" data-tab="add-note">Add Note</button>
    <button class="tab" data-tab="browse-search">Browse & Search</button>
    <button class="tab" data-tab="ai-chat">AI Chat Assistant</button>
  </nav>

  <!-- Add Note -->
  <section id="add-note" class="tab-panel active">
    <div class="card">
      <div class="row">
        <label>Title</label>
        <input id="note-title" placeholder="Short descriptive title" />
      </div>

      <div class="row grid-3">
        <div>
          <label>Question IDs (comma-separated)</label>
          <input id="note-qids" placeholder="e.g. Q23, Q24" />
        </div>
        <div>
          <label>Topics (comma-separated)</label>
          <input id="note-topics" placeholder="e.g. Sequences, Complex Numbers" />
        </div>
        <div>
          <label>References / Links</label>
          <input id="note-refs" placeholder="Paste URLs or short refs" />
        </div>
      </div>

      <div class="row">
        <label>Body (Explanation / Steps / Solution)</label>
        <textarea id="note-body" rows="12" placeholder="Write your full note here..."></textarea>
      </div>

      <div class="actions">
        <button id="btn-save-note" class="btn primary">Save Note (Ctrl/Cmd + Enter)</button>
        <button id="btn-clear-form" class="btn secondary">Clear Form</button>
        <span id="note-status" class="muted"></span>
      </div>
      <input type="hidden" id="note-id" />
    </div>
  </section>

  <!-- Browse & Search -->
  <section id="browse-search" class="tab-panel">
    <div class="search-bar card">
      <input id="search-input" placeholder="Searchâ€¦  (supports topic:<kw>  qid:<id>  title:<word>  or plain text)" />
      <div class="chips" id="topic-chips"></div>
      <div class="tools">
        <details>
          <summary>Tools</summary>
          <div class="tools-grid">
            <button id="btn-export" class="btn">Export Notes (JSON)</button>
            <label class="file-btn">
              Import Notes (JSON)
              <input id="import-input" type="file" accept=".json" hidden />
            </label>
            <button id="btn-delete-all" class="btn danger">Delete All (notes + chat)</button>
          </div>
        </details>
      </div>
    </div>

    <div id="notes-list" class="notes-list"></div>
  </section>

  <!-- AI Chat Assistant -->
  <section id="ai-chat" class="tab-panel">
    <div class="card">
      <div class="row grid-3">
        <div>
          <label>Topic</label>
          <input id="chat-topic" placeholder="e.g. Linear Algebra / Matrices" />
        </div>
        <div>
          <label>Gemini API Key</label>
          <input id="gemini-key" placeholder="Paste your Gemini API key (kept in memory only)" />
        </div>
        <div class="align-end">
          <button id="btn-load-chat" class="btn">Load Topic History</button>
          <button id="btn-clear-chat" class="btn danger">Clear Topic History</button>
        </div>
      </div>

      <div id="chat-window" class="chat-window"></div>

      <div class="chat-input">
        <textarea id="chat-message" rows="3" placeholder="Ask a concept, derivation, or â€˜whyâ€™ questionâ€¦"></textarea>
        <button id="btn-send" class="btn primary">Send</button>
      </div>
      <div id="typing" class="typing hidden">Gemini is thinkingâ€¦</div>
    </div>
  </section>

  <footer class="footer">
    <span>Â© 2025 JAM Notes</span>
    <span class="tiny">Dark theme Â· Realtime Â· Supabase + Gemini</span>
  </footer>

  <script>
    // ====== CONFIG: paste your Supabase project details here ======
    const SUPABASE_URL = "https://YOUR-PROJECT-REF.supabase.co"; // <- paste
    const SUPABASE_ANON_KEY = "YOUR-ANON-PUBLIC-KEY"; // <- paste
  </script>
  <script src="script.js"></script>
</body>
</html>
